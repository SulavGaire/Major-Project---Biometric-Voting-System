 // A simple Arduino project to show how to use a SSD1306 OLED display with ESP32-CAM.
// The reason why this is interesting is that the SSD1306 uses I2C, not SPI.
// Since the ESP32-CAM doesn't have I2C pins, we have to use the Wire lib to define our own I2C pins.

#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

// ESP32-CAM doesn't have dedicated i2c pins, so we define our own. Let's choose 15 and 14
#define I2C_SDA 15
#define I2C_SCL 14
TwoWire I2Cbus = TwoWire(0);

// Display defines
#define SCREEN_WIDTH    128
#define SCREEN_HEIGHT   64
#define OLED_RESET      -1
#define SCREEN_ADDRESS  0x3C
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &I2Cbus, OLED_RESET);

#define FRAME_DELAY (42)
#define FRAME_WIDTH (32)
#define FRAME_HEIGHT (32)
#define FRAME_COUNT (sizeof(click) / sizeof(click[0]))
const byte PROGMEM click[][128] = {
  {0,0,0,0,0,0,0,0,1,128,1,128,15,192,3,240,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,16,8,16,8,16,15,240,8,16,1,128,8,16,0,0,8,16,0,0,8,16,0,0,8,24,0,0,24,15,192,3,240,1,128,1,128,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,1,128,1,128,15,192,3,240,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,16,8,16,8,16,15,240,8,16,1,128,8,16,0,0,8,16,0,0,8,16,0,0,8,24,0,0,24,15,192,3,240,1,128,1,128,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,15,192,3,240,28,0,0,56,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,16,8,16,8,16,15,240,8,16,1,128,8,16,0,0,8,16,0,0,8,24,0,0,8,12,0,0,24,7,192,3,240,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,3,224,7,192,15,192,3,240,8,0,0,16,24,0,0,24,24,0,0,24,24,0,0,24,24,0,0,24,16,0,0,8,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,24,8,16,24,24,15,240,24,24,1,128,24,24,0,0,24,24,0,0,24,8,0,0,24,15,192,3,240,3,224,7,192,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,3,224,7,192,15,192,3,240,8,0,0,16,24,0,0,24,24,0,0,24,24,0,0,24,24,0,0,24,16,0,0,8,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,24,8,16,24,24,15,240,24,24,1,128,24,24,0,0,24,24,0,0,24,8,0,0,16,7,192,3,240,3,224,7,192,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,7,192,3,224,31,128,1,248,48,0,0,8,48,0,0,12,32,0,0,4,32,0,0,4,32,0,0,4,32,0,0,4,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,0,8,16,0,32,15,240,4,32,1,128,4,32,0,0,4,32,0,0,4,48,0,0,12,16,0,0,12,31,128,1,248,7,192,3,224,0,0,0,0,0,0,0,0},
  {0,0,0,0,63,0,0,252,96,0,0,6,64,0,0,2,64,0,0,2,64,0,0,2,64,0,0,2,64,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,0,8,16,0,0,15,240,0,64,1,128,2,64,0,0,2,64,0,0,2,64,0,0,2,64,0,0,2,64,0,0,2,96,0,0,6,63,0,0,252,0,0,0,0},
  {31,0,0,248,126,0,0,126,192,0,0,3,192,0,0,3,128,0,0,1,128,0,0,1,128,0,0,1,128,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,0,8,16,0,0,15,240,0,0,1,128,0,128,0,0,1,128,0,0,1,128,0,0,1,128,0,0,1,192,0,0,3,64,0,0,3,126,0,0,126,31,0,0,252},
  {6,0,0,96,63,0,0,252,96,0,0,6,64,0,0,2,64,0,0,2,64,0,0,2,64,0,0,2,64,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,0,8,16,0,0,15,240,0,0,1,128,0,64,0,0,2,64,0,0,2,64,0,0,2,64,0,0,2,64,0,0,2,96,0,0,2,63,0,0,254,6,0,0,96},
  {0,0,0,0,15,128,1,240,31,0,0,248,32,0,0,4,96,0,0,6,64,0,0,2,64,0,0,2,64,0,0,2,64,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,2,64,0,0,2,64,0,0,2,64,0,0,2,96,0,0,6,32,0,0,4,31,0,0,248,15,128,1,240,0,0,0,0},
  {0,0,0,0,0,0,0,0,3,224,7,192,7,0,0,224,8,0,0,48,16,0,0,8,48,0,0,12,32,0,0,4,32,0,0,4,32,0,0,4,32,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,4,32,0,0,4,32,0,0,4,32,0,0,4,32,0,0,12,48,0,0,12,16,0,0,24,8,0,0,48,6,0,0,224,3,224,7,192,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,248,31,0,1,128,1,128,3,0,0,224,4,0,0,32,12,0,0,48,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,0,0,0,0,32,0,0,0,48,0,0,0,24,0,0,0,12,0,0,16,4,0,8,16,0,0,8,16,0,0,8,16,0,0,24,8,0,0,16,12,0,0,48,4,0,0,96,7,0,0,192,1,128,1,128,0,248,30,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,31,248,0,0,112,14,0,0,192,3,0,3,0,1,128,2,0,0,64,4,0,0,96,12,0,0,48,8,0,0,16,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,32,32,8,16,48,96,8,16,24,192,8,16,13,128,8,16,7,0,8,24,2,0,24,8,0,0,16,12,0,0,48,4,0,0,96,2,0,0,64,3,0,1,128,0,192,3,0,0,112,14,0,0,31,248,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,31,248,0,0,112,14,0,0,192,3,0,3,0,1,128,2,0,0,64,4,0,0,96,12,0,0,48,8,0,2,16,24,0,4,24,16,0,12,8,16,0,24,8,16,0,16,8,16,32,32,8,16,48,96,8,16,24,192,8,16,13,128,8,16,7,0,8,24,2,0,24,8,0,0,16,12,0,0,48,4,0,0,96,2,0,0,64,3,0,1,128,0,192,3,0,0,112,14,0,0,31,248,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,31,248,0,0,112,14,0,0,192,3,0,3,0,1,128,2,0,0,64,4,0,0,96,12,0,0,48,8,0,2,16,24,0,4,24,16,0,12,8,16,0,24,8,16,0,16,8,16,32,32,8,16,48,96,8,16,24,192,8,16,13,128,8,16,7,0,8,24,2,0,24,8,0,0,16,12,0,0,48,4,0,0,96,2,0,0,64,3,0,1,128,0,192,3,0,0,112,14,0,0,31,248,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,31,248,0,0,112,14,0,0,192,3,0,3,0,1,128,2,0,0,64,4,0,0,96,12,0,0,48,8,0,2,16,24,0,4,24,16,0,12,8,16,0,24,8,16,0,16,8,16,32,32,8,16,48,96,8,16,24,192,8,16,13,128,8,16,7,0,8,24,2,0,24,8,0,0,16,12,0,0,48,4,0,0,96,2,0,0,64,3,0,1,128,0,192,3,0,0,112,14,0,0,31,248,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,31,248,0,0,112,14,0,0,192,3,0,3,0,1,128,2,0,0,64,4,0,0,96,12,0,0,48,8,0,2,16,24,0,4,24,16,0,12,8,16,0,24,8,16,0,16,8,16,32,32,8,16,48,96,8,16,24,192,8,16,13,128,8,16,7,0,8,24,2,0,24,8,0,0,16,12,0,0,48,4,0,0,96,2,0,0,64,3,0,1,128,0,192,3,0,0,112,14,0,0,31,248,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,31,248,0,0,112,14,0,0,192,3,0,3,0,1,128,2,0,0,64,4,0,0,96,12,0,0,48,8,0,2,16,24,0,4,24,16,0,12,8,16,0,24,8,16,0,16,8,16,32,32,8,16,48,96,8,16,24,192,8,16,13,128,8,16,7,0,8,24,2,0,24,8,0,0,16,12,0,0,48,4,0,0,96,2,0,0,64,3,0,1,128,0,192,3,0,0,112,14,0,0,31,248,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,31,248,0,0,112,14,0,0,192,3,0,3,0,1,128,2,0,0,64,4,0,0,96,12,0,0,48,8,0,2,16,24,0,4,24,16,0,12,8,16,0,24,8,16,0,16,8,16,32,32,8,16,48,96,8,16,24,192,8,16,13,128,8,16,7,0,8,24,2,0,24,8,0,0,16,12,0,0,48,4,0,0,96,2,0,0,64,3,0,1,128,0,192,3,0,0,112,14,0,0,31,248,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,31,248,0,0,112,14,0,0,192,3,0,3,0,1,128,2,0,0,64,4,0,0,96,12,0,0,48,8,0,0,16,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,32,32,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,24,2,0,24,8,0,0,16,12,0,0,48,4,0,0,96,2,0,0,64,3,0,1,128,0,192,3,0,0,112,14,0,0,31,248,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,6,48,0,0,62,60,0,0,224,7,0,1,128,1,128,3,0,0,192,6,0,0,64,4,0,0,32,12,0,0,48,8,0,0,16,8,0,0,16,24,0,0,24,0,0,0,16,0,0,0,0,0,0,0,0,24,0,0,24,8,0,0,16,8,0,0,16,8,0,0,16,12,0,0,32,4,0,0,96,6,0,0,64,3,0,0,128,1,128,1,128,0,240,6,0,0,62,60,0,0,14,32,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,240,15,0,3,128,1,192,6,0,0,96,12,0,0,48,8,0,0,16,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,24,0,0,24,8,0,0,16,12,0,0,48,6,0,0,96,3,0,1,192,0,240,15,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,1,128,1,128,15,192,3,240,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,16,8,16,8,16,15,240,8,16,1,128,8,16,0,0,8,16,0,0,8,16,0,0,8,24,0,0,24,15,192,3,240,1,128,1,128,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,1,128,1,128,15,192,3,240,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,16,8,16,8,16,15,240,8,16,1,128,8,16,0,0,8,16,0,0,8,16,0,0,8,24,0,0,24,15,192,3,240,1,128,1,128,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,1,128,1,128,15,192,3,240,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,16,8,16,8,16,15,240,8,16,1,128,8,16,0,0,8,16,0,0,8,16,0,0,8,24,0,0,24,15,192,3,240,1,128,1,128,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,1,128,1,128,15,192,3,240,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,16,8,16,8,16,15,240,8,16,1,128,8,16,0,0,8,16,0,0,8,16,0,0,8,24,0,0,24,15,192,3,240,1,128,1,128,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,1,128,1,128,15,192,3,240,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,16,8,16,8,16,15,240,8,16,1,128,8,16,0,0,8,16,0,0,8,16,0,0,8,24,0,0,24,15,192,3,240,1,128,1,128,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,1,128,1,128,15,192,3,240,24,0,0,24,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,16,0,0,8,0,0,0,0,0,0,0,0,0,32,132,0,0,32,132,0,0,32,132,0,0,0,128,0,0,0,128,0,0,0,128,0,0,3,128,0,0,0,0,0,0,0,0,0,16,8,16,8,16,15,240,8,16,1,128,8,16,0,0,8,16,0,0,8,16,0,0,8,24,0,0,24,15,192,3,240,1,128,1,128,0,0,0,0,0,0,0,0}
};


void setup()
{
  Serial.begin(115200);

  // Initialize I2C with our defined pins
  I2Cbus.begin(I2C_SDA, I2C_SCL, 100000);

  Serial.println("Initialize display");

  // SSD1306_SWITCHCAPVCC = generate display voltage from 3.3V internally
  if(!display.begin(SSD1306_SWITCHCAPVCC, SCREEN_ADDRESS))
  {
    Serial.printf("SSD1306 OLED display failed to initalize.\nCheck that display SDA is connected to pin %d and SCL connected to pin %d\n", I2C_SDA, I2C_SCL);
    while (true);
  }

  Serial.println("Show 'Hello World!' on display");
  display.clearDisplay();
  display.setCursor(0, 0);
  display.setTextSize(2);
  display.setTextColor(SSD1306_WHITE);
  display.print("Hello\nWorld!");
  display.display();
}
int frame = 0;
void loop()
{
  display.clearDisplay();
  display.drawBitmap(48, 16, click[frame], FRAME_WIDTH, FRAME_HEIGHT, 1);
  display.display();
  frame = (frame + 1) % FRAME_COUNT;
  delay(FRAME_DELAY);
}